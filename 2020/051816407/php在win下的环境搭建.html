<hr>
<h2 id="abbrlink-65423"><a href="#abbrlink-65423" class="headerlink" title="abbrlink: 65423"></a>abbrlink: 65423</h2><h2 id="windows下php环境搭建-Apache2-4-php7-3-18"><a href="#windows下php环境搭建-Apache2-4-php7-3-18" class="headerlink" title="windows下php环境搭建 Apache2.4 + php7.3.18"></a>windows下php环境搭建 Apache2.4 + php7.3.18</h2><h3 id="一、Apache4-2-安装和配置"><a href="#一、Apache4-2-安装和配置" class="headerlink" title="一、Apache4.2 安装和配置"></a>一、Apache4.2 安装和配置</h3><p><strong>下载地址:</strong>  <a href="http://www.apachelounge.com/download/" target="_blank" rel="noopener">http://www.apachelounge.com/download/</a><br>    <a href="https://www.apachehaus.com/cgi-bin/download.plx/" target="_blank" rel="noopener">https://www.apachehaus.com/cgi-bin/download.plx/</a>  </p>
<h4 id="以上两个链接都可以下载"><a href="#以上两个链接都可以下载" class="headerlink" title="以上两个链接都可以下载"></a>以上两个链接都可以下载</h4><ul>
<li><p>在界面中vc15 vc16等之间的差异,vc15是指用vs2014编译的代码,vc16是指vs2015编译的代码 </p>
<img src="apache_1.png" style="zoom:50%;" />

<p>​    <img src="apache_2.png" style="zoom:50%;" /></p>
<h4 id="apache安装目录结构"><a href="#apache安装目录结构" class="headerlink" title="apache安装目录结构"></a>apache安装目录结构</h4></li>
</ul>
<table>
<thead>
<tr>
<th><strong>目录名</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>bin</td>
<td>Apache可执行文件目录，如httpd.exe、ApacheMonitor.exe等</td>
</tr>
<tr>
<td>cig-bin</td>
<td>CGI网页程序目录</td>
</tr>
<tr>
<td>conf</td>
<td>Apache配置文件目录</td>
</tr>
<tr>
<td>htdocs</td>
<td>默认站点的网页文档目录</td>
</tr>
<tr>
<td>logs</td>
<td>Apache日志文件目录，主要包括访问日志access.log和错误日志error.log</td>
</tr>
<tr>
<td>manual</td>
<td>Apache帮助手册目录</td>
</tr>
<tr>
<td>modules</td>
<td>Apache动态加载模块目录</td>
</tr>
</tbody></table>
<h5 id="安装-配置："><a href="#安装-配置：" class="headerlink" title="安装 配置："></a>安装 配置：</h5><p>将已经下载好的压缩包解压到你想要的安装的目录下，如<strong>G:/phpEnv</strong>目录下，这里以<strong>G:/phpEnv/Apache24</strong>为例</p>
<p>1.<strong>使用文本编辑器</strong>    编辑G:/phpEnv/Apache24/conf/<strong>httpd.conf</strong>文件</p>
<h6 id="注意：windows环境下-配置文件所有的-‘-’-改为-‘-’"><a href="#注意：windows环境下-配置文件所有的-‘-’-改为-‘-’" class="headerlink" title="注意：windows环境下,配置文件所有的 ‘ \ ’ 改为 ‘ / ’"></a>注意：windows环境下,配置文件所有的 ‘ \ ’ 改为 ‘ / ’</h6><ul>
<li><p>配置安装目录</p>
<p>更改内容 为ServerRoot “G:/phpEnv/Apache24” </p>
<h6 id="目录根据自己安装目录修改"><a href="#目录根据自己安装目录修改" class="headerlink" title="目录根据自己安装目录修改"></a>目录根据自己安装目录修改</h6><p><img src="apache_3.png" alt=""></p>
</li>
<li><p>配置服务器域名 </p>
<p>更改内容 为ServerName localhost:80</p>
</li>
</ul>
<h6 id="注意必须把前面的-‘-’去掉"><a href="#注意必须把前面的-‘-’去掉" class="headerlink" title="注意必须把前面的 ‘ # ’去掉"></a>注意必须把前面的 ‘ # ’去掉</h6><p>  <img src="apache_4.png" alt=""></p>
<h6 id="当端口被占用时-将端口号修改为其他值"><a href="#当端口被占用时-将端口号修改为其他值" class="headerlink" title="当端口被占用时 将端口号修改为其他值"></a>当端口被占用时 将端口号修改为其他值</h6><p><img src="image-20200518122028162.png" alt=""></p>
<ul>
<li>更改内容 为<br>  <img src="image-20200518122455739.png" alt=""></li>
</ul>
<p>2.<strong>使用cmd(管理员) cd到Apache安装目录的bin文件夹下</strong>  </p>
<ul>
<li><p>安装apache服务，并加入到系统服务中</p>
<h6 id="注意：cmd管理员-在apache安装目录的bin目录下-操作"><a href="#注意：cmd管理员-在apache安装目录的bin目录下-操作" class="headerlink" title="注意：cmd管理员 在apache安装目录的bin目录下 操作"></a>注意：cmd管理员 在apache安装目录的bin目录下 操作</h6><blockquote>
<p>httpd -k install</p>
</blockquote>
<p>  <img src="image-20200518124207693.png" alt=""></p>
<p>  Errors reported here must be corrected before the service can be started<br>  <code>若该句话后面有错误信息，则表示服务安装失败，需要先改正错误。若没有，则成功</code>  </p>
</li>
<li><p>启动apache服务: <strong>两种方式</strong></p>
<ol>
<li><p>cmd命令行 依然需要 管理员权限</p>
<blockquote>
<p>httpd -k start</p>
</blockquote>
</li>
<li><p>可以使用bin文件夹下的 ApacheMonitor.exe启动   双击该程序<br><img src="image-20200518125553982.png" alt="image-20200518125553982"></p>
<p><img src="C:%5CUsers%5C14239%5CDesktop%5Cblog%5Cphp%E5%9C%A8win%E4%B8%8B%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%5Cimage-20200518125625569.png" alt="image-20200518125625569"></p>
<p>启动后浏览器地址栏输入 localhost </p>
<p><img src="image-20200518124318456.png" alt=""></p>
</li>
</ol>
</li>
</ul>
<h3 id="补充Apache服务卸载"><a href="#补充Apache服务卸载" class="headerlink" title="补充Apache服务卸载:"></a>补充Apache服务卸载:</h3><blockquote>
<p>httpd.exe -k uninstall </p>
</blockquote>
<p><img src="image-20200518124419438.png" alt="image-20200518124419438"></p>
<h3 id="补充Apache常用配置"><a href="#补充Apache常用配置" class="headerlink" title="补充Apache常用配置"></a>补充Apache常用配置</h3><h6 id="需要注意的是，一旦修改错误，会造成Apache无法安装或无法启动，建议在修改前先备份“httpd-conf”配置文件。"><a href="#需要注意的是，一旦修改错误，会造成Apache无法安装或无法启动，建议在修改前先备份“httpd-conf”配置文件。" class="headerlink" title="需要注意的是，一旦修改错误，会造成Apache无法安装或无法启动，建议在修改前先备份“httpd.conf”配置文件。"></a>需要注意的是，一旦修改错误，会造成Apache无法安装或无法启动，建议在修改前先备份“httpd.conf”配置文件。</h6><table>
<thead>
<tr>
<th><strong>配置项</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td>ServerRoot</td>
<td>Apache服务器的根目录，即安装目录</td>
</tr>
<tr>
<td>Listen</td>
<td>服务器监听的端口号，如80、8080</td>
</tr>
<tr>
<td>LoadModule</td>
<td>需要加载的模块</td>
</tr>
<tr>
<td>ServerAdmin</td>
<td>服务器管理员的邮箱地址</td>
</tr>
<tr>
<td>ServerName</td>
<td>服务器的域名</td>
</tr>
<tr>
<td>DocumentRoot</td>
<td>网站根目录</td>
</tr>
<tr>
<td>ErrorLog</td>
<td>用于记录错误日志</td>
</tr>
</tbody></table>
<h3 id="补充我遇到的错误"><a href="#补充我遇到的错误" class="headerlink" title="补充我遇到的错误"></a>补充我遇到的错误</h3><blockquote>
<p><strong>错误1</strong><br>(OS 1783)占位程序接收到错误数据。  : AH00370: Failed to create the ‘localhost’ service<br><img src="apache_6.png" alt=""><br><strong>出错原因:</strong> 服务安装被360软件拦截<br><strong>解决方法:</strong> 关掉360一类的安全软件</p>
</blockquote>
<blockquote>
<p><strong>错误2</strong><br>AH00558: httpd.exe: Could not reliably determine the server’s fully qualified domain name, using fe80::8566:6b7a:4dc2:6593. Set the ‘ServerName’ directive globally to suppress this message<br><img src="apache_6.png" alt=""><br><strong>出错原因:</strong> Apache配置文件中 缺少ServerName的信息(httpd.conf中ServerName之前 ‘ # ’删掉)<br><strong>解决方法:</strong> 删除 ServerName前的‘ # ’</p>
</blockquote>
<hr>
<h3 id="二、PHP安装和配置"><a href="#二、PHP安装和配置" class="headerlink" title="二、PHP安装和配置"></a>二、PHP安装和配置</h3><p><strong>下载地址：</strong><br><a href="https://windows.php.net/download#php-7.3" target="_blank" rel="noopener">https://windows.php.net/download#php-7.3</a></p>
<h6 id="注意下载线程安全版"><a href="#注意下载线程安全版" class="headerlink" title="注意下载线程安全版"></a>注意下载线程安全版</h6><p><img src="image-20200518130511074.png" alt=""></p>
<h6 id="php目录结构解析"><a href="#php目录结构解析" class="headerlink" title="php目录结构解析"></a>php目录结构解析</h6><p>​    ext是PHP扩展文件所在的目录<br>​    php.exe是PHP的命令行应用程序<br>​    php7apache2_4.dll是用于Apache的DLL模块<br>​    php.ini-development是PHP预设的配置模板，适用于开发环境<br>​    php.ini-production也是配置模板，适合网站上线时使用</p>
<h4 id="安装和配置："><a href="#安装和配置：" class="headerlink" title="安装和配置："></a>安装和配置：</h4><ul>
<li><p>解压压缩包到  <strong>G:\phpEnv\php</strong>下</p>
</li>
<li><p>创建php.ini：将php目录下<strong>php.ini-development</strong>拷贝更名为 <strong>php.ini</strong>(php配置文件)</p>
</li>
<li><p>配置扩展目录：打开php.ini</p>
<p>  ​    更改内容 ；extension_dir=”ext”  ==&gt;  extension_dir=”php扩展目录” </p>
<p>  <img src="image-20200518133933051.png" alt="image-20200518133933051"></p>
</li>
<li><p>配置PHP时区： 打开php.ini      PRC:中国时区 UTC：协调世界时</p>
<p>  更改内容 ;date.timezone =      ==&gt;       data.timezone = PRC <img src="image-20200518134717384.png" alt="image-20200518134717384"></p>
</li>
<li><p>在<strong>apache的httpd.conf</strong>文件中做以下 ==添加内容==</p>
</li>
</ul>
<pre><code>    PHPIniDir &quot;G:/phpEnv/php/&quot;  #根据实际路径修改

    LoadModule php7_module &quot;G:/phpEnv/php/php7apache2_4.dll&quot; #根据实际路径修改

    &lt;FilesMatch &quot;\.php$&quot;&gt;
    setHandler application/x-httpd-php
    &lt;/FilesMatch&gt;   

![](image-20200518130816954.png)</code></pre><ul>
<li><p>修改索引页 ： 打开httpd.conf  </p>
<pre><code>#添加 index.php
&lt;IfModule dir_module&gt;
    DirectoryIndex index.html index.php
&lt;/IfModule&gt;</code></pre></li>
<li><p>测试 php是否安装成功</p>
<p>在网页目录(下面这个目录)下 新建文件 phpinfo.php</p>
<p><img src="image-20200518122455739.png" alt=""></p>
<pre><code># phpinfo.php 文件内容
&lt;?php
    phpinfo();
?&gt;</code></pre><p>完成后，在浏览器中访问<a href="http://localhost/phpinfo.php" target="_blank" rel="noopener">http://localhost/phpinfo.php</a> 出现以下成功 </p>
<h6 id="注意：先重启服务-httpd-k-restart"><a href="#注意：先重启服务-httpd-k-restart" class="headerlink" title="注意：先重启服务 httpd -k restart"></a>注意：先重启服务 httpd -k restart</h6><p><img src="image-20200518140403480.png" alt="image-20200518140403480"></p>
</li>
</ul>
