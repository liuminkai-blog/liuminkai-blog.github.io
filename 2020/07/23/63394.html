<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="数据库, 刘民锴的个人博客">
    <meta name="description" content="刘民锴使用hexo和githubpages 搭建的个人博客 主要用于记录学习笔记 和 技术分享">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>


    <title>数据库 | 刘民锴的个人博客</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 4.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">刘民锴的个人博客</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-sticky-note" style="zoom: 0.6;"></i>
      
      <span>Essay</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">刘民锴的个人博客</div>
        <div class="logo-desc">
            
            刘民锴使用hexo和githubpages 搭建的个人博客 主要用于记录学习笔记 和 技术分享
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-sticky-note"></i>
			
			Essay
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/kaiminliu" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/kaiminliu" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//medias/featureimages/21.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">数据库</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    .toc-fixed .toc-link::before{
        position: fixed!important;/*当toc的位置改为fixed时，.toc-link::before也要改为fixed*/
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                <span class="chip bg-color">数据库</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-07-23
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-10-25
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    11k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    40 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2><span id="wei-shi-me-xu-yao-shu-ju-ku">为什么需要数据库？</span><a href="#wei-shi-me-xu-yao-shu-ju-ku" class="header-anchor">.</a></h2><p>有人会说为什么需要用数据库去存数据，用文件存储不香吗？</p>
<p>的确文件存储数据是很方便的，但是当数据量比较大的情况下，如何管理这些数据就成了大问题</p>
<ul>
<li>读写文件并解析出数据需要大量重复代码</li>
<li>从成千上万的数据中快速查询出指定数据需要复杂的逻辑。</li>
</ul>
<p>如果每个应用程序都各自写自己的读写数据的代码，一方面<strong>效率低</strong>，<strong>容易出错</strong>，另一方面，每个应用程序访问数据的接口都不相同，<strong>数据难以复用</strong>。</p>
<p>所以，数据库作为一种专门管理数据的软件就出现了。应用程序不需要自己管理数据，而是通过数据库软件提供的接口来读写数据。至于数据本身如何存储到文件，那是数据库软件的事情，应用程序自己并不关心</p>
<pre class="line-numbers language-ascii"><code class="language-ascii">┌──────────────┐
│ application  │
└──────────────┘
       ▲│
       ││
   read││write
       ││
       │▼
┌──────────────┐
│   database   │
└──────────────┘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="shu-ju-mo-xing">数据模型</span><a href="#shu-ju-mo-xing" class="header-anchor">.</a></h3><p>数据库按照数据结构来组织、存储和管理数据，实际上，数据库一共有三种模型：</p>
<ul>
<li>层次模型</li>
<li>网状模型</li>
<li>关系模型</li>
</ul>
<p>层次模型就是以“上下级”的层次关系来组织数据的一种方式，层次模型的数据结构看起来就像一颗树：</p>
<pre class="line-numbers language-ascii"><code class="language-ascii">            ┌─────┐
            │     │
            └─────┘
               │
       ┌───────┴───────┐
       │               │
    ┌─────┐         ┌─────┐
    │     │         │     │
    └─────┘         └─────┘
       │               │
   ┌───┴───┐       ┌───┴───┐
   │       │       │       │
┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐
│     │ │     │ │     │ │     │
└─────┘ └─────┘ └─────┘ └─────┘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>网状模型把每个数据节点和其他很多节点都连接起来，它的数据结构看起来就像很多城市之间的路网：</p>
<pre class="line-numbers language-ascii"><code class="language-ascii">     ┌─────┐      ┌─────┐
   ┌─│     │──────│     │──┐
   │ └─────┘      └─────┘  │
   │    │            │     │
   │    └──────┬─────┘     │
   │           │           │
┌─────┐     ┌─────┐     ┌─────┐
│     │─────│     │─────│     │
└─────┘     └─────┘     └─────┘
   │           │           │
   │     ┌─────┴─────┐     │
   │     │           │     │
   │  ┌─────┐     ┌─────┐  │
   └──│     │─────│     │──┘
      └─────┘     └─────┘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>关系模型把数据看作是一个二维表格，任何数据都可以通过行号+列号来唯一确定，它的数据模型看起来就是一个Excel表：</p>
<pre class="line-numbers language-ascii"><code class="language-ascii">┌─────┬─────┬─────┬─────┬─────┐
│     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │
├─────┼─────┼─────┼─────┼─────┤
│     │     │     │     │     │
└─────┴─────┴─────┴─────┴─────┘<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>选取主键的一个基本原则</strong>是：不使用任何业务相关的字段作为主键。</p>
<p>因此，身份证号、手机号、邮箱地址这些看上去可以唯一的字段，均<em>不可</em>用作主键。</p>
<p>主键一般选用：</p>
<blockquote>
<ol>
<li>自增整数类型(auto_increment)：数据库会在插入数据时自动为每一条记录分配一个自增整数，这样我们就完全不用担心主键重复，也不用自己预先生成主键；</li>
<li>全局唯一GUID类型：使用一种全局唯一的字符串作为主键，类似<code>8f55d96b-8acc-4636-8cb8-76bf8abc2f57</code>。GUID算法通过网卡MAC地址、时间戳和随机数保证任意计算机在任意时间生成的字符串都是不同的，大部分编程语言都内置了GUID算法，可以自己预算出主键。</li>
</ol>
</blockquote>
<h2><span id="shu-ju-ku-ji-ben-cao-zuo">数据库基本操作</span><a href="#shu-ju-ku-ji-ben-cao-zuo" class="header-anchor">.</a></h2><h3><span id="chuang-jian-shu-ju-ku-ddl">创建数据库(DDL)</span><a href="#chuang-jian-shu-ju-ku-ddl" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql">create database 数据库名称;

-- 1
create database studentdb;

-- 2  为了避免用户自定义的名称与系统命令冲突，最好使用反引号（` `）包裹数据库名称、字段名称和数据表名称
create database `studentdb`;

-- 3 如果库已存在 可使用 if not exists
create database if not exists `studentdb`;

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605211303019.png" alt="create database"></p>
<h3><span id="cha-kan-shu-ju-ku-ddl">查看数据库(DDL)</span><a href="#cha-kan-shu-ju-ku-ddl" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql">-- 在完成创建数据库后，若要查看该数据库的信息

show create database 数据库名称;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605211513314.png" alt="show database1"></p>
<pre class="line-numbers language-mysql"><code class="language-mysql">-- 查看MySQL数据库服务器中已经存在的数据库

show databases;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605211631770.png" alt="show databases"></p>
<h3><span id="xuan-ze-shu-ju-ku-ddl">选择数据库(DDL)</span><a href="#xuan-ze-shu-ju-ku-ddl" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql">use 数据库名称;

use `studentdb`;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3><span id="shan-chu-shu-ju-ku-ddl">删除数据库(DDL)</span><a href="#shan-chu-shu-ju-ku-ddl" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql">-- 数据库的删除操作不仅会删除里面的数据，还会回收原来分配的存储空间。
drop database 数据库名称;

-- 1
drop database `studentdb`;

-- 2 若待删除数据库不存在 可使用 if exists
drop database if exists `studb`;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605212238196.png" alt="drop database"></p>
<h3><span id="shu-ju-lei-xing">数据类型</span><a href="#shu-ju-lei-xing" class="header-anchor">.</a></h3><ul>
<li><p>数值类型</p>
<ul>
<li><p>整型</p>
<ul>
<li>tinyint</li>
<li>smallint</li>
<li>mediumint</li>
<li>int</li>
<li>bigint</li>
</ul>
</li>
<li><p>浮点型</p>
<ul>
<li>float</li>
<li>double</li>
<li>decimal</li>
</ul>
</li>
</ul>
</li>
<li><p>布尔类型</p>
</li>
<li><p>字符串类型</p>
</li>
<li><p>日期与时间类型</p>
</li>
</ul>
<p><strong>数值 – 整数类型</strong></p>
<table>
<thead>
<tr>
<th><strong>数据类型</strong></th>
<th><strong>字节数</strong></th>
<th><strong>取值范围</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>TINYINT</strong></td>
<td>1</td>
<td>有符号：-128~127 <br>无符号：0~255</td>
<td>最小的整数</td>
</tr>
<tr>
<td><strong>SMALLINT</strong></td>
<td>2</td>
<td>有符号：-32 768<del>32 767<br>无符号：0</del>65 535</td>
<td>小型整数</td>
</tr>
<tr>
<td><strong>MEDIUMINT</strong></td>
<td>3</td>
<td>有符号：-8 388 608<del>8 388 607<br>无符号：0</del>16 777 215</td>
<td>中型整数</td>
</tr>
<tr>
<td><strong>INT</strong></td>
<td>4</td>
<td>有符号：-2 147 483 648<del>2 147 483 647<br>无符号：0</del>4 294 967 295</td>
<td>常规整数</td>
</tr>
<tr>
<td><strong>BIGINT</strong></td>
<td>8</td>
<td>有符号：-9 223 372 036 854 775 808<del>9 223 372 036854 775 807<br>无符号：0</del>18 446 744 073 709 551 615</td>
<td>较大的整数</td>
</tr>
</tbody></table>
<p><strong>数值 – 浮点类型</strong></p>
<table>
<thead>
<tr>
<th><strong>数据类型</strong></th>
<th><strong>字节数</strong></th>
<th><strong>取值范围</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>FLOAT</strong></td>
<td>4</td>
<td>有符号：-3.402 823 466E+38<del>-1.175 494 351E-38<br>无符号：0/1.175 494 351E-38</del>3.402 823 466E+38</td>
<td>单精度</td>
</tr>
<tr>
<td><strong>DOUBLE</strong></td>
<td>8</td>
<td>有符号：-1.797 693 134 862 315 7E+308~2.225 073 858 507 201 4E-308<br>无符号：0/2.225 073 858 507 201 4E-308 ~1.797 693 134 862 315 7E+308</td>
<td>双精度</td>
</tr>
<tr>
<td><strong>DECIMAL(M,D)</strong></td>
<td>M+2</td>
<td>有符号：-1.797 693 134 862 315 7E+308~2.225 073 858 507 201 4E-308<br>无符号：0/2.225 073 858 507 201 4E-308 ~1.797 693 134 862 315 7E+308</td>
<td>定点数</td>
</tr>
</tbody></table>
<blockquote>
<p>M : 数据长度    D : 小数点后的长度</p>
</blockquote>
<p><strong>字符串类型</strong></p>
<table>
<thead>
<tr>
<th><strong>数据类型</strong></th>
<th><strong>取值范围</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>CHAR</strong></td>
<td>0~2^8-1(字符)</td>
<td>用于表示固定长度的字符串</td>
</tr>
<tr>
<td><strong>VARCHAR</strong></td>
<td>0~2^8-1(字符)</td>
<td>用于表示可变长度的字符串</td>
</tr>
<tr>
<td><strong>ENUM</strong></td>
<td>0~2^16-1(字节数)</td>
<td>表示枚举类型，只能存储一个枚举字符串值</td>
</tr>
<tr>
<td><strong>BLOB</strong></td>
<td>0~2^16-1(字节数)</td>
<td>用于表示二进制大数据（常规的）</td>
</tr>
<tr>
<td><strong>TEXT</strong></td>
<td>0~2^16-1(字节数)</td>
<td>用于表示大文本数据（常规的）</td>
</tr>
<tr>
<td><strong>TINYBLOB</strong></td>
<td>0~2^8-1(字节数)</td>
<td>用于表示二进制大数据（较小的）</td>
</tr>
<tr>
<td><strong>TINYTEXT</strong></td>
<td>0~2^8-1(字节数)</td>
<td>用于表示大文本数据（较小的）</td>
</tr>
<tr>
<td><strong>MEDIUMBLOB</strong></td>
<td>0~2^24-1(字节数)</td>
<td>用于表示二进制大数据（中等的）</td>
</tr>
<tr>
<td><strong>MEDIUMTEXT</strong></td>
<td>0~2^24-1(字节数)</td>
<td>用于表示大文本数据（中等的）</td>
</tr>
<tr>
<td><strong>LONGBLOB</strong></td>
<td>0~2^32-1(字节数)</td>
<td>用于表示二进制大数据（较大的）</td>
</tr>
<tr>
<td><strong>LONGTEXT</strong></td>
<td>0~2^32-1(字节数)</td>
<td>用于表示大文本数据（较大的）</td>
</tr>
</tbody></table>
<blockquote>
<p>BLOB和TEXT都是用于存储大量数据的，但二者的区别在于，对于存储的数据进行排序和比较时，BLOB是区分大小写的，而TEXT是不区分大小写的。</p>
</blockquote>
<p><strong>日期与时间类型</strong></p>
<table>
<thead>
<tr>
<th><strong>数据类型</strong></th>
<th><strong>功能说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>DATA</strong></td>
<td>用于存储日期，存储格式为YYYY-MM-DD 例如：2008-12-24</td>
</tr>
<tr>
<td><strong>TIME</strong></td>
<td>用于存储时间，存储格式为HH:MM:SS 例如：14:25:10</td>
</tr>
<tr>
<td><strong>DATETIME</strong></td>
<td>用于存储日期和时间，存储格式为YYYY-MM-DD HH:MM:SS</td>
</tr>
<tr>
<td><strong>TIMESTAMP</strong></td>
<td>用于存储时间戳，存储格式为YYYYMMDDHHMMSS</td>
</tr>
<tr>
<td><strong>YEAR(M)</strong></td>
<td>用于存储年份，M用于指定年份的长度，其值为2或4中的一种</td>
</tr>
</tbody></table>
<h3><span id="cun-chu-yin-qing">存储引擎</span><a href="#cun-chu-yin-qing" class="header-anchor">.</a></h3><ul>
<li><p>InnoDB 存储引擎</p>
<ul>
<li>默认的存储引擎</li>
<li>用于完成事务、回滚、崩溃修复和多版本并发控制的事务安全处理</li>
<li>提供了良好的事务管理、崩溃修复能力和并发控制</li>
</ul>
</li>
<li><p>MyISAM 存储引擎</p>
<blockquote>
<p>MyISAM 存储引擎是基于 ISAM 存储引擎发展起来的，它不仅解决了 ISAM的很多不足，还增加了很多有用的扩展。<br>其中，对于使用 MyISAM 存储引擎的数据表，会被存储成3个文件，文件名与表名相同，文件扩展名分别为 frm、myd 和 myi。</p>
<table>
<thead>
<tr>
<th><strong>扩展名</strong></th>
<th><strong>功能说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Frm</strong></td>
<td>用于存储表的结构</td>
</tr>
<tr>
<td><strong>Myd</strong></td>
<td>用于存储数据，是MYData的缩写</td>
</tr>
<tr>
<td><strong>Myi</strong></td>
<td>用于存储索引，是MYIndex的缩写</td>
</tr>
</tbody></table>
<p>相比 InnoDB ，MyISAM 的优点是处理速度快；缺点是不支持事务处理等</p>
</blockquote>
</li>
<li><p>MEMORY 存储引擎</p>
<blockquote>
<p>MEMORY存储引擎，是MySQL中的一类特殊的存储引擎。在MEMORY存储引擎的表中，所有数据都保存在内存中，因此数据的处理速度快，但不能持久保存（程序出错或关机时会丢失数据），而且不能存储太大的数据。对于需要很快的读写速度，但数据量小、不需要持久保存的数据来说，MEMORY存储引擎是一个理想的选择。</p>
</blockquote>
</li>
<li><p>ARCHIVE 存储引擎</p>
<blockquote>
<p>ARCHIVE 存储引擎适合保存数量庞大、长期维护但很少被访问的数据。对于使用 ARCHIVE 存储引擎的数据表，数据存储时会利用 zlib 压缩库进行压缩，在记录被请求时会实时进行解压。需要注意的是，ARCHIVE 存储引擎仅仅支持查询和插入操作，且由于不支持数据索引，查询效率比较低。</p>
</blockquote>
</li>
</ul>
<h4><span id="cha-kan-cun-chu-yin-qing-ddl">查看存储引擎(DDL)</span><a href="#cha-kan-cun-chu-yin-qing-ddl" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">show engines;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605215034612.png" alt="show engines"></p>
<h3><span id="shu-ju-biao-cao-zuo">数据表操作</span><a href="#shu-ju-biao-cao-zuo" class="header-anchor">.</a></h3><h4><span id="chuang-jian-shu-ju-biao-ddl">创建数据表(DDL)</span><a href="#chuang-jian-shu-ju-biao-ddl" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">create [temporary] table [if not exists] 数据表名
[(
    col_name type [完整性约束条件],
    ...
)][table_options][select_statement];<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>[]中的内容是可选项 </p>
<p>完整性约束条件 : 字段的某些特殊约束条件</p>
<table>
<thead>
<tr>
<th><strong>参数名称</strong></th>
<th><strong>功能说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>TEMPORARY</strong></td>
<td>如果使用该关键字，表示创建一个临时表</td>
</tr>
<tr>
<td><strong>IF NOT EXISTS</strong></td>
<td>如果表已经存在则不执行创建操作</td>
</tr>
<tr>
<td><strong>col_name</strong></td>
<td>字段名</td>
</tr>
<tr>
<td><strong>Type</strong></td>
<td>字段类型</td>
</tr>
<tr>
<td><strong>table_options</strong></td>
<td>表的一些特性参数</td>
</tr>
<tr>
<td><strong>select_statement</strong></td>
<td>用于根据SELECT语句的查询结果创建表</td>
</tr>
</tbody></table>
</blockquote>
<p><img src="/2020/07/23/63394/image-20200605221903473.png" alt="create table"></p>
<blockquote>
<p>comment 表示 注释内容</p>
</blockquote>
<h6><span id="zhu-yi">注意</span><a href="#zhu-yi" class="header-anchor">.</a></h6><blockquote>
<p>数据名的最大长度64字节<br>表名的最大长度64字节<br>列名的最大长度64字节<br>索引名的最大长度64字节<br>别名的最大长度255字节</p>
</blockquote>
<h4><span id="cha-kan-shu-ju-ku-zhong-de-biao-ddl">查看数据库中的表(DDL)</span><a href="#cha-kan-shu-ju-ku-zhong-de-biao-ddl" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">-- 前提 use 数据库
show tables;

-- 无需 use
show tables from 数据库名称;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605222459277.png" alt="show tables"></p>
<h4><span id="cha-kan-biao-jie-gou-ddl">查看表结构(DDL)</span><a href="#cha-kan-biao-jie-gou-ddl" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">三种方案
-- 1 此种方式可以查看数据表的创建语句和表的字符编码
show create table `stu` \G
# \G 用于显示结果纵向排列



-- 2 此种方式用于查看表的字段信息
describe `stu`;
# 简写
desc `stu`;

# 可指定查看某一列
desc `stu` `sno`;



-- 3 
# show [full] columns from 数据表名 [from 数据库名]
# show [full] columns from 数据库名.数据表名
show columns from `stu`<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200605222946108.png" alt="show create table"></p>
<p><img src="/2020/07/23/63394/image-20200605223522731.png" alt="desc"></p>
<p><img src="/2020/07/23/63394/image-20200605224208732.png" alt="show columns"></p>
<h4><span id="xiu-gai-biao-jie-gou-ddl">修改表结构(DDL)</span><a href="#xiu-gai-biao-jie-gou-ddl" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">alter [ignore] table 数据表名
add [column] create_definition [first | after column_name] # 添加新字段
| change [column] old_col_name new_col_name type #修改字段名称及类型
| modify [column] create_definition # 修改子句定义字段
| drop [column] col_name # 删除字段
| rename [as] new_tbl_name # 更改表名


-- ------------------------------
# create_definition : 包含 col_name type
# type : 数据类型,约束条件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>在上述语法中， 当指定 IGNORE 时，如果出现重复关键的行，则只执行一行，其他重复的行被删除。其中，ALTER TABLE 语句允许指定多个动作，动作间使用英文逗号（,）分隔，每个动作表示对表的一个修改。</p>
</blockquote>
<h5><span id="tian-jia-xin-zi-duan">添加新字段</span><a href="#tian-jia-xin-zi-duan" class="header-anchor">.</a></h5><p><img src="/2020/07/23/63394/image-20200606001029385.png" alt="alter table add"></p>
<h5><span id="xiu-gai-zi-duan-ming-ji-lei-xing">修改字段名及类型</span><a href="#xiu-gai-zi-duan-ming-ji-lei-xing" class="header-anchor">.</a></h5><p><img src="/2020/07/23/63394/image-20200606001456196.png" alt="alter table change"></p>
<p><img src="/2020/07/23/63394/image-20200606003843127.png" alt></p>
<blockquote>
<p>需要注意的是，在使用“CHANGE”时，必须为新字段名称设置数据类型，即使与原来的数据类型相同，也必须进行重新设置。此外，当修改后的数据类型无法容纳原有数据时，修改将会失败。</p>
</blockquote>
<h5><span id="xiu-gai-zi-duan-shu-ju-lei-xing">修改字段数据类型</span><a href="#xiu-gai-zi-duan-shu-ju-lei-xing" class="header-anchor">.</a></h5><p><img src="/2020/07/23/63394/image-20200606012000480.png" alt="alter table modify"></p>
<p><img src="/2020/07/23/63394/image-20200606012132672.png" alt></p>
<h5><span id="shan-chu-zi-duan">删除字段</span><a href="#shan-chu-zi-duan" class="header-anchor">.</a></h5><h5><span id><img src="/2020/07/23/63394/image-20200606012620193.png" alt="alter table drop"></span><a href="#" class="header-anchor">.</a></h5><p><img src="/2020/07/23/63394/image-20200606012758631.png" alt></p>
<h5><span id="geng-gai-biao-ming-cheng">更改表名称</span><a href="#geng-gai-biao-ming-cheng" class="header-anchor">.</a></h5><p><img src="/2020/07/23/63394/image-20200606013106138.png" alt="alter table rename"></p>
<h4><span id="chong-ming-ming-biao-duo-ge-shu-ju-biao">重命名表 （多个数据表）</span><a href="#chong-ming-ming-biao-duo-ge-shu-ju-biao" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">rename table 源数据表名 to 新数据表名

# 该语句可以同时对多个数据表进行重命名，多个表之间以逗号“,”分隔

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200606013742726.png" alt="rename table to"></p>
<h4><span id="shan-chu-biao-ddl">删除表(DDL)</span><a href="#shan-chu-biao-ddl" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">drop table [if exists] 数据表名;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>在开发时，应谨慎使用数据表删除操作，因为数据表一旦删除，表中的所有数据都将被清除</p>
</blockquote>
<p>演示： 略</p>
<h3><span id="shu-ju-yue-shu">数据约束</span><a href="#shu-ju-yue-shu" class="header-anchor">.</a></h3><blockquote>
<p>在 MySQL 中，为了减少输入错误和保证数据的完整性，可以对字段设置约束。所谓约束就是一种命名规则和机制，通过对数据的增、删、改操作进行一些限制，以保证数据库中数据的完整性。</p>
</blockquote>
<h4><span id="chang-jian-de-biao-yue-shu-5-chong">常见的表约束（5种）</span><a href="#chang-jian-de-biao-yue-shu-5-chong" class="header-anchor">.</a></h4><ul>
<li>主键约束</li>
<li>非空约束</li>
<li>默认约束</li>
<li>唯一键约束</li>
<li>外键约束</li>
</ul>
<blockquote>
<p>MySQL 提供了两种定义约束的方式：</p>
<p>列约束和表约束。列约束定义在一个列上，只能对该列起约束作用</p>
<p>表约束一般定义在一个表的多个列上，要求被约束的列满足一定的关系。</p>
</blockquote>
<h5><span id="fei-kong-yue-shu-not-null">非空约束 not null</span><a href="#fei-kong-yue-shu-not-null" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 被约束的当前字段的值不能为空值 NULL
字段名 数据类型 NOT NULL;

# 如
sno varchar(12) not null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>在 MySQL 中，所有数据类型的值都可以是 NULL，包括 INT、FLOAT 等数据类型。</p>
<p>需要注意的是，空字符串和 0 皆不属于空值 NULL。</p>
</blockquote>
<h5><span id="wei-yi-yue-shu-unique">唯一约束 unique</span><a href="#wei-yi-yue-shu-unique" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 唯一约束用于保证数据表中字段的唯一性，即表中字段的值不能重复出现

# 列级约束
字段名 数据类型 UNIQUE
# 表级约束
UNIQUE(字段名1, 字段名2, ……);

# 虽然不允许出现重复的值，但是可以出现多个空值 NULL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5><span id="zhu-jian-yue-shu-primary-key">主键约束 primary key</span><a href="#zhu-jian-yue-shu-primary-key" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 主键约束相当于唯一约束和非空约束的组合
# 每个表最多只允许含有一个主键，建立主键约束可以在列级别创建，也可以在表级别上创建
#主键约束可以由一个字段构成单字段主键，也可以由多个字段组合而成

# 列级约束
字段名 数据类型  PRIMARY KEY
# 表级约束
PRIMARY KEY (字段名1,字段名2,……)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5><span id="mo-ren-yue-shu-default">默认约束 default</span><a href="#mo-ren-yue-shu-default" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 默认约束用于指定数据表中字段的默认值

字段名 数据类型 DEFAULT 默认值;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h5><span id="wai-jian-yue-shu-foreign-key">外键约束  foreign key</span><a href="#wai-jian-yue-shu-foreign-key" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 外键并不是通过列名实现的，而是通过定义外键约束实现的

FOREIGN KEY (外键) REFERENCES 其他表(其他表主键);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3><span id="shu-ju-de-cao-zuo">数据的操作</span><a href="#shu-ju-de-cao-zuo" class="header-anchor">.</a></h3><h4><span id="cha-ru-ji-lu-dml">插入记录(DML)</span><a href="#cha-ru-ji-lu-dml" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql"># 字段列表的字段 位置顺序可以随意更改的
insert into 表名(字段1,字段2,...) values(值1,值2,...);

# 省略字段列表 数据必须按照数据表定义字段时的顺序
insert into 表名 values(值1,值2,...);

# 指定字段
insert into 表名(字段1,字段2) values(值1,值2);
insert into 表名 set 字段1=值1,...;

# 同时添加多条记录

insert into 表名(字段1,字段2,...) values
(值1,值2,...),
(值1,值2,...),
...
(值1,值2,...);

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200606090607830.png" alt="insert into 带字段列表"></p>
<p><img src="/2020/07/23/63394/image-20200606091702499.png" alt="省略字段列表"></p>
<p><img src="/2020/07/23/63394/image-20200606095611370.png" alt="多条记录"></p>
<p><img src="/2020/07/23/63394/image-20200606095706478.png" alt="查看表中记录"></p>
<h4><span id="xiu-gai-ji-lu-dml">修改记录(DML)</span><a href="#xiu-gai-ji-lu-dml" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">update 表名 set 字段1=值1,...[where 条件表达式];
# “WHERE条件表达式”是可选的，用于指定哪些记录需要被更新。否则，数据表中的所有记录都将被更新<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4><span id="shan-chu-ji-lu-dml">删除记录(DML)</span><a href="#shan-chu-ji-lu-dml" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql">delete from 表名 [where 条件表达式];
# “表名”指的是待执行删除操作的表，WHERE 子句为可选参数，用于指定删除的条件，满足条件的记录才会被删除
# 若没有 条件表达式 代表 清空该表 除上述表达之外

# 清空表
truncate [table] 表名;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h6><span id="truncate-yu-delete-de-qu-bie">truncate 与 delete的区别</span><a href="#truncate-yu-delete-de-qu-bie" class="header-anchor">.</a></h6><blockquote>
<p>1.DELETE语句是DML语句，TRUNCATE语句通常被认为是DDL语句。<br>2.DELETE语句后面可以跟WHERE子句，通过指定WHERE子句中的条件表达式只删除满足条件的部分记录，而TRUNCATE语句只能用于清空表中的所有记录。<br>3.使用TRUNCATE语句删除表中的数据后，再次向表中添加记录时，自动增加字段(auto_increment)的默认初始值重新由1开始，而使用DELETE语句删除表中的记录时，不影响自动增长值。</p>
</blockquote>
<h4><span id="cha-xun-yu-ju-dql">查询语句(DQL)</span><a href="#cha-xun-yu-ju-dql" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql"># 基本语法
SELECT  [DISTINCT] *|{字段名1, 字段名2, 字段名3,……}
FROM 表名
    [WHERE 条件表达式1]
    [GROUP BY 字段名 [HAVING 条件表达式2]]
    [ORDER BY 字段名 [ASC|DESC]]
    [LIMIT [OFFSET] 记录数]


# AS子句 添加别名
SELECT 字段名称 [AS] 别名, 字段名2 [AS] 别名,... FROM 表名;
# 若别名是纯数字，或含有空格等特殊字符时，必须使用反引号“`”包裹。且在为字段定义别名时，AS可以省略使用空格代替。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<table>
<thead>
<tr>
<th><strong>组成部分</strong></th>
<th><strong>功能说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>DISTINCT</strong></td>
<td>可选参数，用于剔除查询结果中重复的数据</td>
</tr>
<tr>
<td><strong>*</strong></td>
<td>“*”是通配符，表示表中所有字段</td>
</tr>
<tr>
<td><strong>{字段名1,……}</strong></td>
<td>指定查询列表，与“*”为互斥关系，两者任选其一</td>
</tr>
<tr>
<td><strong>FROM</strong></td>
<td>用于指定待查询的数据表</td>
</tr>
<tr>
<td><strong>WHERE</strong></td>
<td>可选参数，用于指定查询条件</td>
</tr>
<tr>
<td><strong>GROUP BY</strong></td>
<td>可选参数，用于将查询结果按照指定字段进行分组，“HAVING”也是可选参数，用于对分组后的结果进行过滤</td>
</tr>
<tr>
<td><strong>ORDER BY</strong></td>
<td>可选参数，用于将查询结果按照指定字段进行排序。ASC表示升序，DESC表示降序</td>
</tr>
<tr>
<td><strong>LIMIT</strong></td>
<td>是可选参数，用于限制查询结果的数量。第1个参数表示偏移量，第2个参数设置返回查询记录的条数</td>
</tr>
</tbody></table>
<h4><span id="dan-biao-cha-xun-dql">单表查询(DQL)</span><a href="#dan-biao-cha-xun-dql" class="header-anchor">.</a></h4><h5><span id="tiao-jian-cha-xun">条件查询</span><a href="#tiao-jian-cha-xun" class="header-anchor">.</a></h5><p><img src="/2020/07/23/63394/image-20200606102411321.png" alt></p>
<h6><span id="zhu-yi-mysql-zai-cha-xun-shi-bu-qu-fen-ying-wen-da-xiao-xie">注意 mysql在查询时 不区分英文大小写</span><a href="#zhu-yi-mysql-zai-cha-xun-shi-bu-qu-fen-ying-wen-da-xiao-xie" class="header-anchor">.</a></h6><p><img src="/2020/07/23/63394/image-20200606105139864.png" alt></p>
<p><img src="/2020/07/23/63394/image-20200606105220291.png" alt></p>
<h5><span id="duo-tiao-jian-cha-xun">多条件查询</span><a href="#duo-tiao-jian-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">select * from 表名 where (字段1，字段2) = (值1,值2);

# or

select * from 表名 
where 字段1 = 值1
and    字段2 = 值2;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5><span id="bi-jiao-da-xiao">比较大小</span><a href="#bi-jiao-da-xiao" class="header-anchor">.</a></h5><pre class="line-numbers language-sql"><code class="language-sql"><span class="token operator">=</span>  <span class="token operator">></span>  <span class="token operator">&lt;</span>  <span class="token operator">>=</span>  <span class="token operator">&lt;=</span>  <span class="token operator">&lt;></span>  <span class="token operator">!=</span>  <span class="token operator">!</span><span class="token operator">></span>  <span class="token operator">!</span><span class="token operator">&lt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5><span id="dai-in-guan-jian-zi-cha-xun">带IN关键字查询</span><a href="#dai-in-guan-jian-zi-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># IN 关键字，用于判断某个字段的值是否在指定集合中
SELECT  *|{字段名1, 字段名2, 字段名3,...} 
FROM 表名
WHERE 字段名 [NOT] IN(元素1, 元素2, ...)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200606103921472.png" alt></p>
<h5><span id="dai-between-and-fan-wei-cha-xun">带BETWEEN AND 范围查询</span><a href="#dai-between-and-fan-wei-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT *|{字段名1, 字段名2, ……}
FROM 表名
WHERE 字段名 [NOT] BETWEEN 值1 AND 值2
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200606104229114.png" alt></p>
<h5><span id="dai-like-de-zi-fu-pi-pei-cha-xun-mo-hu-cha-xun">带LIKE的字符匹配查询（模糊查询）</span><a href="#dai-like-de-zi-fu-pi-pei-cha-xun-mo-hu-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 模糊查询

SELECT *|{字段名1, 字段名2, ……}
FROM 表名
WHERE 字段名 [NOT] LIKE '匹配字符串';
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h6><span id="tong-pei-fu">通配符</span><a href="#tong-pei-fu" class="header-anchor">.</a></h6><table>
<thead>
<tr>
<th><strong>通配符</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>%</strong></td>
<td>可以匹配一个字符或多个字符，可代表任意长度的字符串，长度可以为0。例如，“书%”表示以“书”开头的字符串。</td>
</tr>
<tr>
<td><strong>_</strong></td>
<td>仅可以匹配一个字符。例如，“书_”表示匹配字符串长度为2，以书开始的字符串。</td>
</tr>
</tbody></table>
<blockquote>
<p>百分号(%)适用于不定长的模糊查询</p>
<p>下划线(_)适用于定长的查询。</p>
</blockquote>
<h6><span id="zhuan-yi-zi-fu">转义字符</span><a href="#zhuan-yi-zi-fu" class="header-anchor">.</a></h6><blockquote>
<p>有时存在字符串中本身就含有 _ 或 %，那么我们就需要转义字符</p>
</blockquote>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">USER</span> <span class="token keyword">WHERE</span> name <span class="token operator">like</span> <span class="token operator">%</span>n\__1<span class="token operator">%</span> <span class="token keyword">ESCAPE</span> <span class="token string">'\'</span> <span class="token comment" spellcheck="true">-- 第一个_ 被转义</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5><span id="dai-and-de-duo-tiao-jian-cha-xun">带AND的多条件查询</span><a href="#dai-and-de-duo-tiao-jian-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT *|{字段名1, 字段名2, ...}
FROM 表名
WHERE 条件表达式1 AND 条件表达式2 [... AND 条件表达式n];
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h5><span id="dai-or-de-tiao-jian-cha-xun">带OR的条件查询</span><a href="#dai-or-de-tiao-jian-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT *|{字段名1, 字段名2, ...}
FROM 表名
WHERE 条件表达式1 OR 条件表达式2 [... OR 条件表达式n];
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h5><span id="dai-not-shao">带NOT (少)</span><a href="#dai-not-shao" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT *|{字段名1, 字段名2, 字段名3,...} FROM 表名 WHERE NOT 字段 = 值;

# 相当于 

WHERE 字段 <> 值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4><span id="pai-xu-yu-xian-liang-dan-biao-cha-xun-dql">排序与限量 (单表查询)(DQL)</span><a href="#pai-xu-yu-xian-liang-dan-biao-cha-xun-dql" class="header-anchor">.</a></h4><h5><span id="order-by-pai-xu-cha-xun">ORDER BY排序查询</span><a href="#order-by-pai-xu-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT 字段名1, 字段名2, ...
FROM 表名
ORDER BY 字段名1 [ASC | DESC] [, 字段名2 [ASC | DESC
...];
# ASC 升序
# DESC 降序
# 当有多个字段进行排序时，首先按照字段名 1 进行排序，当遇到字段 1值相同时，再按照字段 2 进行排序<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>如果要实现<strong>分组结果</strong>的排序，ORDER BY 子句中必须使用 聚集函数或GROUP BY 子句的分组列</p>
</blockquote>
<h5><span id="limit-xian-liang-cha-xun-fen-ye-cha-xun">LIMIT限量查询(分页查询)</span><a href="#limit-xian-liang-cha-xun-fen-ye-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql"># 对于一次性查询出的大量记录，不仅不便于阅读查看，还会浪费系统效率
# 指定查询结果从哪一条记录开始，以及每次查询出的记录数量

SELECT 字段名1, 字段名2, ……
FROM 表名
LIMIT [OFFSET, ] 记录数;

# OFFSET 默认从0开始 表示 第一条记录 开始
#如
LIMIT 3 OFFSET 2; # 从第三条记录开始 最多 3条记录
LIMIT 2, 3;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>分页查询</p>
<p>LIMIT 和 OFFSET对应关系</p>
<p>LIMIT pageSize</p>
<p>对应的 OFFSET  pageSize*i   （i  从 0 开始的整数）</p>
</blockquote>
<h4><span id="ju-he-han-shu-yu-fen-zu-dan-biao-cha-xun-dql">聚合函数与分组(单表查询）(DQL)</span><a href="#ju-he-han-shu-yu-fen-zu-dan-biao-cha-xun-dql" class="header-anchor">.</a></h4><h5><span id="ju-he-han-shu">聚合函数</span><a href="#ju-he-han-shu" class="header-anchor">.</a></h5><blockquote>
<p>聚合函数就是把数据聚合起来的函数</p>
</blockquote>
<table>
<thead>
<tr>
<th><strong>函数名</strong></th>
<th><strong>作用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>COUNT()</strong></td>
<td>计算表中记录的个数或者列中值的个数。</td>
</tr>
<tr>
<td><strong>SUM()</strong></td>
<td>获取符合条件所有结果的和。</td>
</tr>
<tr>
<td><strong>AVG()</strong></td>
<td>计算一列中数据值的平均值。</td>
</tr>
<tr>
<td><strong>MAX()</strong></td>
<td>获取查询数据中的最大值。</td>
</tr>
<tr>
<td><strong>MIN()</strong></td>
<td>获取查询数据中的最小值。</td>
</tr>
</tbody></table>
<h5><span id="group-by-fen-zu-cha-xun">GROUP BY 分组查询</span><a href="#group-by-fen-zu-cha-xun" class="header-anchor">.</a></h5><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT 字段名1, 字段名2, ...
FROM 表名
GROUP BY 字段名1 [, 字段名2, ... [HAVING 条件表达式]];

# HAVING 关键字指定条件表达式对分组后的内容进行过滤
# HAVING 与 WHERE 虽然作用相同，但是它们还是有一定的区别，HAVING 关键字后可以跟聚合函数，而 WHERE 则不可以<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>需要注意的是，使用 GROUP BY 直接进行分组查询后，<code>显示的结果是分组后的第一条记录的值</code>。因此，搭配 COUNT() 或 GROUP_CONCAT() 等聚合函数一起使用，才能获得每个组的查询结果。</p>
</blockquote>
<p><img src="/2020/07/23/63394/image-20200606112102315.png" alt></p>
<p><img src="/2020/07/23/63394/image-20200606112822165.png" alt></p>
<h4><span id="duo-biao-cha-xun-dql">多表查询 (DQL)</span><a href="#duo-biao-cha-xun-dql" class="header-anchor">.</a></h4><pre class="line-numbers language-mysql"><code class="language-mysql"># 笛卡尔积
SELECT * FROM 表1,表2;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h5><span id="he-bing-cha-xun">合并查询</span><a href="#he-bing-cha-xun" class="header-anchor">.</a></h5><blockquote>
<p>将多个 SELECT 语句的查询结果合并到一起</p>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql">SELECT  ...

UNION [ALL | DISTINCT]

SELECT  ...
[UNION [ALL | DISTINCT]
SELECT  ...
...];

# 默认 DISTINCT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>查询结果集中的字段名称总是与第一个 SELECT 语句中的字段名称相同。<br>每个SELECT语句必须<code>拥有相同数量的字段</code>，和<code>相似的数据类型(如unsigned int, int)</code>。另外，每条 SELECT 语句中相同数据类型的字段顺序也必须相同。</p>
<p>SELECT <code>cid</code>, <code>name</code> FROM <code>article</code> WHERE <code>cid</code> = 1<br>UNION<br>SELECT <code>cid</code>, <code>cname</code> FROM <code>category</code> WHERE <code>cid</code> = 1;</p>
<p>当使用 UNION 连接的多个查询结果中存在相同的记录时，会自动合并成一条记录。如果不需要合并可以使用 UNION ALL 进行合并查询。</p>
</blockquote>
<h5><span id="lian-jie-cha-xun">连接查询</span><a href="#lian-jie-cha-xun" class="header-anchor">.</a></h5><ul>
<li>交叉连接查询</li>
<li>内连接查询</li>
<li>外连接查询</li>
</ul>
<h6><span id="jiao-cha-lian-jie">交叉连接</span><a href="#jiao-cha-lian-jie" class="header-anchor">.</a></h6><blockquote>
<p>交叉连接（CROSS JOIN）: 被连接的两个表中所有数据行的笛卡尔积</p>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql">SELECT 查询字段 FROM 表1 CROSS JOIN 表2;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h6><span id="nei-lian-jie">内连接</span><a href="#nei-lian-jie" class="header-anchor">.</a></h6><blockquote>
<p>内连接（INNER JOIN）又称简单连接或自然连接 </p>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql">SELECT 查询字段 FROM 表1 [INNER] JOIN 表2 ON 表1.关系字段 = 表2.关系字段 WHERE 条件;
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>ON 与 WHERE 虽然都是用于连接查询条件，但是它们的使用是有区别的</p>
<p>ON 用于过滤两表连接的条件</p>
<p>WHERE 用于过滤中间表的记录数据</p>
<p>由于内连接查询是<strong>默认</strong>的连接方式，因此可以省略INNER 关键字</p>
</blockquote>
<p><strong>在内连接查询中还有一种特殊的查询</strong>：</p>
<p>​        自连接查询。它是指相互连接的表在物理上为同一个表，但逻辑上分为两个表</p>
<h6><span id="wai-lian-jie">外连接</span><a href="#wai-lian-jie" class="header-anchor">.</a></h6><blockquote>
<p>与内连接不同的是，外连接（OUTER JOIN）生成的结果集不仅可以包括符合连接条件的数据记录，</p>
<p>而且还可以包括左表、右表或两表中所有的数据记录。</p>
<p>根据使用需求不同，外连接可以分为：左连接“LEFT (OUTER) JOIN”、右连接查询“RIGHT (OUTER) JOIN”</p>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql">SELECT 所查字段 FROM 表1 LEFT|RIGHT|FULL [OUTER] JOIN 表2
ON 表1.关系字段 = 表2.关系字段 WHERE 条件

# 关键字“LEFT|RIGHT [OUTER] JOIN”左边的表被称为左表，关键字右边的表被称为右表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>①左连接</strong></p>
<blockquote>
<p>左连接查询用于返回左表中的所有记录，以及右表中符合连接条件的记录。</p>
<p>当左表的某行记录在右表中没有匹配的记录时，右表中相关的记录将设为空值。</p>
</blockquote>
<p><strong>②右连接</strong></p>
<blockquote>
<p>右连接查询用于返回右表中的所有记录，以及左表中符合连接条件的记录</p>
<p>当右表的某行记录在左表中没有匹配的记录时，左表中相关的记录将设为空值。</p>
</blockquote>
<p><strong>③全连接</strong></p>
<blockquote>
<p>把两张表的所有记录全部选择出来，并且，自动把对方不存在的列填充为NULL</p>
</blockquote>
<h6><span id="qu-bie">区别</span><a href="#qu-bie" class="header-anchor">.</a></h6><ul>
<li><p>INNER JOIN只返回同时存在于两张表的行数据</p>
</li>
<li><p>RIGHT OUTER JOIN返回右表都存在的行。如果某一行仅在右表存在，那么结果集就会以<code>NULL</code>填充剩下的字段</p>
</li>
<li><p>LEFT OUTER JOIN则返回左表都存在的行</p>
</li>
<li><p>FULL OUTER JOIN，它会把两张表的所有记录全部选择出来，并且，自动把对方不存在的列填充为NULL</p>
</li>
</ul>
<h5><span id="zi-cha-xun">子查询</span><a href="#zi-cha-xun" class="header-anchor">.</a></h5><blockquote>
<p>包含在一条 SQL 语句中的 SELECT 语句</p>
<p>子查询必须书写在括号内</p>
<p>使用子查询时，外层语句的 WHERE 后面除了比较运算符外，还可以使用 IN、EXISTS、ANY、ALL 等操作符。</p>
</blockquote>
<h6><span id="dan-xing-zi-cha-xun">单行子查询</span><a href="#dan-xing-zi-cha-xun" class="header-anchor">.</a></h6><pre class="line-numbers language-mysql"><code class="language-mysql"># 将一个 SELECT 查询语句的结果作为另一个查询语句的 WHERE 条件

SELECT * FROM `article` WHERE `cid`=
(SELECT `cid` FROM `category` WHERE `cname`='生活');
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h6><span id="dai-in-guan-jian-zi-de-zi-cha-xun">带IN关键字的子查询</span><a href="#dai-in-guan-jian-zi-de-zi-cha-xun" class="header-anchor">.</a></h6><pre class="line-numbers language-mysql"><code class="language-mysql">SELECT * FROM `article` WHERE `cid` IN
(SELECT `cid` FROM `category` WHERE `cname` IN('科技', '生活'));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h6><span id="dai-exists-guan-jian-zi-de-zi-cha-xun">带EXISTS关键字的子查询</span><a href="#dai-exists-guan-jian-zi-de-zi-cha-xun" class="header-anchor">.</a></h6><pre class="line-numbers language-mysql"><code class="language-mysql"># EXISTS 关键字后面连接的子查询语句不返回查询记录，而是返回一个真假值
# 当子查询语句查询到满足条件的记录时，就返回 TRUE，执行外层SQL 语句；否则返回 FALSE，不执行外层的 SQL 语句

UPDATE `article` SET `name`='修改标题' WHERE `cid`=999 AND
EXISTS (SELECT 1 FROM `category` WHERE `cid`=999);
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h6><span id="dai-any-guan-jian-zi-de-zi-cha-xun">带ANY关键字的子查询</span><a href="#dai-any-guan-jian-zi-de-zi-cha-xun" class="header-anchor">.</a></h6><blockquote>
<p>使用 ANY 关键字时，只要其后的子查询满足其中任意一个判断条件，就返回结果作为外层 SQL 语句的执行条件</p>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql">SELECT * FROM `article` WHERE `cid` = ANY 
(SELECT `cid` FROM `category`);

#上述 SQL 语句执行后，查询出了在栏目表中有相应记录的文章信息。如果文章表中有一些文章的 cid 在栏目表中不存在相应记录，则不会被查询出来。
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h6><span id="dai-all-guan-jian-zi-de-zi-cha-xun">带ALL关键字的子查询</span><a href="#dai-all-guan-jian-zi-de-zi-cha-xun" class="header-anchor">.</a></h6><blockquote>
<p>ALL 关键字在使用时，只有满足内层查询语句返回的所有结果，才可以执行外层查询语句</p>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql">SELECT * FROM `article`
WHERE `cid` <> ALL (SELECT `cid` FROM `category`);
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>子查询返回单值的时候可用比较运算符，但返回多值的时候要用ANY或ALL，使用ANY和ALL时必须同时使用比较运算符</p>
<h6><span id="yu-any-he-all-xiang-guan-de-bi-jiao-yun-suan-fu">与ANY和ALL相关的比较运算符</span><a href="#yu-any-he-all-xiang-guan-de-bi-jiao-yun-suan-fu" class="header-anchor">.</a></h6><table>
<thead>
<tr>
<th>运算符</th>
<th>等效功能</th>
<th>功能含义</th>
</tr>
</thead>
<tbody><tr>
<td>&gt; ANY</td>
<td>&gt; 最小值（MIN）</td>
<td>大于子查询结果中的某个值</td>
</tr>
<tr>
<td>&gt; ALL</td>
<td>&gt; 最大值（MAX）</td>
<td>大于子查询结果中的所有值</td>
</tr>
<tr>
<td>&lt; ANY</td>
<td>&lt; 最小值（MIN）</td>
<td>小于子查询结果中的某个值</td>
</tr>
<tr>
<td>&lt; ALL</td>
<td>&lt; 最小值（MIN）</td>
<td>小于子查询结果中的所有值</td>
</tr>
<tr>
<td>&gt;= ANY</td>
<td>&gt;= 最小值（MIN）</td>
<td>大于等于子查询结果中的某个值</td>
</tr>
<tr>
<td>&gt;= ALL</td>
<td>&gt;= 最大值（MAX）</td>
<td>大于等于子查询结果中的所有值</td>
</tr>
<tr>
<td>&lt;= ANY</td>
<td>&lt;= 最小值（MIN）</td>
<td>小于等于子查询结果中的某个值</td>
</tr>
<tr>
<td>&lt;= ALL</td>
<td>&lt;= 最小值（MIN）</td>
<td>小于等于子查询结果中的所有值</td>
</tr>
<tr>
<td>= ANY</td>
<td>IN</td>
<td>等于子查询结果中的某个值</td>
</tr>
<tr>
<td>= ALL</td>
<td></td>
<td>等于子查询结果中的所有值（无意义）</td>
</tr>
<tr>
<td>!=ANY 或 &lt;&gt;ANY</td>
<td></td>
<td>不等于子查询结果中的某个值</td>
</tr>
<tr>
<td>!=ALL 或 &lt;&gt;ALL</td>
<td>NOT IN</td>
<td>不等于子查询结果中的任何一个值</td>
</tr>
</tbody></table>
<h3><span id="shi-wu">事务</span><a href="#shi-wu" class="header-anchor">.</a></h3><p><a href="https://www.liaoxuefeng.com/wiki/1177760294764384/1179611198786848" target="_blank" rel="noopener">廖雪峰事务</a></p>
<h4><span id="shu-ju-ku-shi-wu">数据库事务</span><a href="#shu-ju-ku-shi-wu" class="header-anchor">.</a></h4><blockquote>
<p>把多条语句作为一个整体进行操作的功能</p>
<p>数据库事务可以确保该事务范围内的所有操作都可以全部成功或者全部失败。</p>
<p>如果事务失败，那么效果就和没有执行这些SQL一样，不会对数据库数据有任何改动。</p>
</blockquote>
<h5><span id="shi-wu-de-4-ge-te-xing-yong-yu-bao-zheng-duo-tiao-sql-de-quan-bu-zhi-xing">事务的4个特性 : 用于保证多条SQL的全部执行</span><a href="#shi-wu-de-4-ge-te-xing-yong-yu-bao-zheng-duo-tiao-sql-de-quan-bu-zhi-xing" class="header-anchor">.</a></h5><ul>
<li>A：Atomic，原子性，将所有SQL作为原子工作单元执行，要么全部执行，要么全部不执行；</li>
<li>C：Consistent，一致性，事务完成后，所有数据的状态都是一致的，即A账户只要减去了100，B账户则必定加上了100；</li>
<li>I：Isolation，隔离性，如果有多个事务并发执行，每个事务作出的修改必须与其他事务隔离；</li>
<li>D：Duration，持久性，即事务完成后，对数据库数据的修改被持久化存储。</li>
</ul>
<h4><span id="yin-shi-shi-wu">隐式事务</span><a href="#yin-shi-shi-wu" class="header-anchor">.</a></h4><blockquote>
<p>对于单条SQL语句，数据库系统自动将其作为一个事务执行</p>
</blockquote>
<h4><span id="xian-shi-shi-wu">显式事务</span><a href="#xian-shi-shi-wu" class="header-anchor">.</a></h4><blockquote>
<p>要手动把多条SQL语句作为一个事务执行，使用<code>BEGIN</code>开启一个事务，使用<code>COMMIT</code>提交一个事务</p>
<blockquote>
<p><code>COMMIT</code>是指提交事务，即试图把事务内的所有SQL所做的修改永久保存。</p>
<p>如果<code>COMMIT</code>语句执行失败了，整个事务也会失败。</p>
</blockquote>
<blockquote>
<p>有时希望主动让事务失败，这时，可以用<code>ROLLBACK</code>回滚事务，整个事务会失败</p>
</blockquote>
<blockquote>
<p>数据库事务是由数据库系统保证的，我们只需要根据业务逻辑使用它就可以</p>
</blockquote>
</blockquote>
<pre class="line-numbers language-mysql"><code class="language-mysql"># 显式事务
BEGIN;
    SQL语句1;
    ...
COMMIT;

# 回滚
BEGIN;
    SQL语句1;
    ...
ROLLBACK;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4><span id="ge-chi-ji-bie">隔离级别</span><a href="#ge-chi-ji-bie" class="header-anchor">.</a></h4><p>对于两个并发执行的事务，如果涉及到操作同一条记录的时候，可能会发生问题。因为并发操作会带来数据的不一致性，包括脏读、不可重复读、幻读等。数据库系统提供了隔离级别来让我们有针对性地选择事务的隔离级别，避免数据不一致的问题。</p>
<p>SQL标准定义了4种隔离级别，分别对应可能出现的数据不一致的情况：</p>
<table>
<thead>
<tr>
<th align="left">Isolation Level</th>
<th align="left">脏读（Dirty Read）</th>
<th align="left">不可重复读（Non Repeatable Read）</th>
<th align="left">幻读（Phantom Read）</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Read Uncommitted</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
</tr>
<tr>
<td align="left">Read Committed</td>
<td align="left">-</td>
<td align="left">Yes</td>
<td align="left">Yes</td>
</tr>
<tr>
<td align="left">Repeatable Read</td>
<td align="left">-</td>
<td align="left">-</td>
<td align="left">Yes</td>
</tr>
<tr>
<td align="left">Serializable</td>
<td align="left">-</td>
<td align="left">-</td>
<td align="left">-</td>
</tr>
</tbody></table>
<p><strong>students表数据</strong></p>
<pre class="line-numbers language-mysql"><code class="language-mysql">select * from students;
+----+-------+
| id | name  |
+----+-------+
|  1 | Alice |
+----+-------+
1 row in set (0.00 sec)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p><strong>Read Uncommitted</strong>是隔离级别最低的一种事务级别。在这种隔离级别下，一个事务会读到另一个事务更新后但未提交的数据，如果另一个事务回滚，那么当前事务读到的数据就是脏数据，这就是脏读（Dirty Read）</p>
<blockquote>
<p><strong>脏数据</strong>:从目标中取出的数据已经过期、错误或者没有意义 ，即，与数据库中内容不一致的数据</p>
</blockquote>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">时刻</th>
<th align="left">事务A</th>
<th align="left">事务B</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</td>
<td align="left">SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">BEGIN;</td>
<td align="left">BEGIN;</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">UPDATE students SET name = ‘Bob’ WHERE id = 1;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">4</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 1;</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">ROLLBACK;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 1;</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"></td>
<td align="left">COMMIT;</td>
</tr>
</tbody></table>
<ul>
<li><p>在<strong>Read Committed</strong>隔离级别下，一个事务可能会遇到不可重复读（Non Repeatable Read）的问题。</p>
<p>不可重复读是指，在一个事务内，多次读同一数据，在这个事务还没有结束时，如果另一个事务恰好修改了这个数据，那么，在第一个事务中，两次读取的数据就可能不一致。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">时刻</th>
<th align="left">事务A</th>
<th align="left">事务B</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">SET TRANSACTION ISOLATION LEVEL READ COMMITTED;</td>
<td align="left">SET TRANSACTION ISOLATION LEVEL READ COMMITTED;</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">BEGIN;</td>
<td align="left">BEGIN;</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 1;</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">UPDATE students SET name = ‘Bob’ WHERE id = 1;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">COMMIT;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 1;</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"></td>
<td align="left">COMMIT;</td>
</tr>
</tbody></table>
<ul>
<li><p>在<strong>Repeatable Read</strong>隔离级别下，一个事务可能会遇到幻读（Phantom Read）的问题。</p>
<p>幻读是指，在一个事务中，第一次查询某条记录，发现没有，但是，当试图更新这条不存在的记录时，竟然能成功，并且，再次读取同一条记录，它就神奇地出现了。</p>
<table>
<thead>
<tr>
<th align="left">时刻</th>
<th align="left">事务A</th>
<th align="left">事务B</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1</td>
<td align="left">SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;</td>
<td align="left">SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;</td>
</tr>
<tr>
<td align="left">2</td>
<td align="left">BEGIN;</td>
<td align="left">BEGIN;</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 99;</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">INSERT INTO students (id, name) VALUES (99, ‘Bob’);</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">COMMIT;</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">6</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 99;</td>
</tr>
<tr>
<td align="left">7</td>
<td align="left"></td>
<td align="left">UPDATE students SET name = ‘Alice’ WHERE id = 99;</td>
</tr>
<tr>
<td align="left">8</td>
<td align="left"></td>
<td align="left">SELECT * FROM students WHERE id = 99;</td>
</tr>
<tr>
<td align="left">9</td>
<td align="left"></td>
<td align="left">COMMIT;</td>
</tr>
</tbody></table>
</li>
<li><p><strong>Serializable</strong>(可串行化)是最严格的隔离级别。在Serializable隔离级别下，所有事务按照次序依次执行，因此，脏读、不可重复读、幻读都不会出现。</p>
<p>虽然Serializable隔离级别下的事务具有最高的安全性，但是，由于事务是串行执行，所以效率会大大下降，应用程序的性能会急剧降低。如果没有特别重要的情景，一般都不会使用Serializable隔离级别</p>
</li>
</ul>
<h4><span id="mo-ren-ge-chi-ji-bie">默认隔离级别</span><a href="#mo-ren-ge-chi-ji-bie" class="header-anchor">.</a></h4><p>​    如果没有指定隔离级别，数据库就会使用默认的隔离级别。在MySQL中，如果使用InnoDB，默认的隔离级别是Repeatable Read</p>
<h2><span id="bu-chong">补充</span><a href="#bu-chong" class="header-anchor">.</a></h2><h3><span id="1-select-ke-yong-yu-ji-suan">1.select可用于计算</span><a href="#1-select-ke-yong-yu-ji-suan" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql">select 100 + 100; //结果 200

# 这个主要用来判断当前到数据库的连接是否有效<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="/2020/07/23/63394/image-20200607144156716.png" alt></p>
<h3><span id="2-na-me-duo-lian-jie-cha-xun-ru-he-he-li-shi-yong">2.那么多连接查询，如何合理使用？</span><a href="#2-na-me-duo-lian-jie-cha-xun-ru-he-he-li-shi-yong" class="header-anchor">.</a></h3><p>我们把tableA看作左表，把tableB看成右表，那么INNER JOIN是选出两张表都存在的记录：</p>
<p><img src="https://www.liaoxuefeng.com/files/attachments/1246892164662976/l" alt="inner-join"></p>
<p>LEFT OUTER JOIN是选出左表存在的记录：</p>
<p><img src="https://www.liaoxuefeng.com/files/attachments/1246893588481376/l" alt="left-outer-join"></p>
<p>RIGHT OUTER JOIN是选出右表存在的记录：</p>
<p><img src="https://www.liaoxuefeng.com/files/attachments/1246893609222688/l" alt="right-outer-join"></p>
<p>FULL OUTER JOIN则是选出左右表都存在的记录：</p>
<p><img src="https://www.liaoxuefeng.com/files/attachments/1246893632359424/l" alt="full-outer-join"></p>
<h3><span id="3-guan-xi-shu-ju-ku-de-ji-ben-cao-zuo-jiu-shi-zeng-shan-gai-cha-ji-crud-create-retrieve-update-delete-qi-zhong-dui-yu-cha-xun-wo-men-yi-jing-xiang-xi-jiang-shu-liao-select-yu-ju-de-xiang-xi-yong-fa">3.关系数据库的基本操作就是增删改查，即CRUD：Create、Retrieve、Update、Delete。其中，对于查询，我们已经详细讲述了<code>SELECT</code>语句的详细用法。</span><a href="#3-guan-xi-shu-ju-ku-de-ji-ben-cao-zuo-jiu-shi-zeng-shan-gai-cha-ji-crud-create-retrieve-update-delete-qi-zhong-dui-yu-cha-xun-wo-men-yi-jing-xiang-xi-jiang-shu-liao-select-yu-ju-de-xiang-xi-yong-fa" class="header-anchor">.</a></h3><h3><span id="4-cha-ru-huo-ti-huan">4.插入或替换</span><a href="#4-cha-ru-huo-ti-huan" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql"># 添加新记录是 但是 记录已存在时，如果不想先删除已存在记录,再插入新记录 可使用
REPLACE INTO 表名(字段1,字段2,...) VALUES(值1,值2,...);
#当记录是不存在的时候,replace 作用 与 insert 一致<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3><span id="5-cha-ru-huo-geng-xin">5.插入或更新</span><a href="#5-cha-ru-huo-geng-xin" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql"># 同样与replace 应用在 添加新纪录 ，但已存在的情况下
INSERT INTO 表名(字段1,字段2,...) VALUES(值1,值2,...)
ON DUPLICATE KEY UPDATE 字段1=新值1 [,字段2=新值2, ...];

# 当记录不存在的时候, 添加时 只使用 insert 的字段 及 值
# 当记录存在的时候, 添加时 使用 update 的字段 及 值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="6-cha-ru-huo-hu-lue">6.插入或忽略</span><a href="#6-cha-ru-huo-hu-lue" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql"># 如果我们希望插入一条新记录（INSERT），但如果记录已经存在，就啥事也不干直接忽略
INSERT IGNORE INTO 
表名(字段1,字段2,...) VALUES(值1,值2,...);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3><span id="7-kuai-zhao-cha-xun-jie-guo-ji-jian-li-xin-biao">7.快照 （查询结果集建立新表）</span><a href="#7-kuai-zhao-cha-xun-jie-guo-ji-jian-li-xin-biao" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql"># 如果想要对一个表进行快照，即复制一份当前表的数据到一个新表

CREATE TABLE 新表 
SELECT * FROM  旧表 [WHERE 条件表达式];<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3><span id="8-xie-ru-cha-xun-jie-guo-ji">8.写入查询结果集</span><a href="#8-xie-ru-cha-xun-jie-guo-ji" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql"># 如果查询结果集需要写入到表中，可以结合INSERT和SELECT，将SELECT语句的结果集直接插入到指定表中。

# 创建一个统计成绩的表statistics，记录各班的平均成绩：
CREATE TABLE statistics (
    id BIGINT NOT NULL AUTO_INCREMENT,
    class_id BIGINT NOT NULL,
    average DOUBLE NOT NULL,
    PRIMARY KEY (id)
);

# 我们就可以用一条语句写入各班的平均成绩
INSERT INTO statistics (class_id, average) SELECT class_id, AVG(score) FROM students GROUP BY class_id;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>确保<code>INSERT</code>语句的列和<code>SELECT</code>语句的列能一一对应</p>
</blockquote>
<h3><span id="9-qiang-zhi-shi-yong-zhi-ding-suo-yin">9.强制使用指定索引</span><a href="#9-qiang-zhi-shi-yong-zhi-ding-suo-yin" class="header-anchor">.</a></h3><pre class="line-numbers language-mysql"><code class="language-mysql"># 在查询的时候，数据库系统会自动分析查询语句，并选择一个最合适的索引。但是很多时候，数据库系统的查询优化器并不一定总是能使用最优索引。如果我们知道如何选择索引，可以使用FORCE INDEX强制查询使用指定的索引

SELECT * FROM students FORCE INDEX (idx_class_id) WHERE class_id = 1 ORDER BY id DESC;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>指定索引的前提是索引<code>idx_class_id</code>必须存在。</p>
</blockquote>
<h3><span id="10-mo-shi-de-chuang-jian-yu-shan-chu">10. 模式的创建与删除</span><a href="#10-mo-shi-de-chuang-jian-yu-shan-chu" class="header-anchor">.</a></h3><blockquote>
<p>创建一个模式相当于创建一个<strong>命名空间</strong>，我们可以在这个命名空间创建数据库对象，如表，视图，索引。。。</p>
</blockquote>
<p><strong>创建：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">SCHEMA</span> <span class="token punctuation">[</span>模式名<span class="token punctuation">]</span> <span class="token keyword">AUTHORIZATION</span> 用户名 <span class="token comment" spellcheck="true">-- 如果没有定义模式名，默认使用用户名充当</span>
    <span class="token punctuation">[</span>表定义语句<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>视图定义语句<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>授权定义子句<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><strong>删除：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">SCHEMA</span> 模式名 <span class="token keyword">CASCADE</span> <span class="token operator">|</span> <span class="token keyword">RESTRICT</span> <span class="token comment" spellcheck="true">-- 级联：删除模式下的所有数据库对象；限制：若存在数据库对象，不删除模式</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="11-suo-yin-de-chuang-jian-yu-shan-chu">11.索引的创建与删除</span><a href="#11-suo-yin-de-chuang-jian-yu-shan-chu" class="header-anchor">.</a></h3><blockquote>
<p>索引是基本表的目录</p>
</blockquote>
<p><strong>作用：</strong></p>
<ul>
<li>加快数据查询速度<ul>
<li>数据量大时，数据文件很大，不使用索引，每次查询，会将数据文件分块读到内存中，查找</li>
<li>如果使用索引，那么先加载索引文件（比数据文件小很多），根据索引找到元祖数据的位置，然后加载元祖数据所在的块，加载到内存查找；</li>
</ul>
</li>
<li>保证数据的唯一性<ul>
<li>定义索引，需要定义数据的唯一性</li>
</ul>
</li>
<li>加快连接速度<ul>
<li>两个表的连接操作，（连接字段建立索引）</li>
</ul>
</li>
</ul>
<p><strong>建立原则：</strong></p>
<ul>
<li>大表建索引</li>
<li>基本表，不要创建过多索引</li>
<li>更具查询条件要求建立索引（查询频度高的）</li>
</ul>
<p><strong>创建索引：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> CLUSTER <span class="token operator">|</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> IX_xxx <span class="token keyword">ON</span> 表名<span class="token punctuation">(</span>列名 <span class="token punctuation">[</span><span class="token keyword">DESC</span> <span class="token operator">|</span> <span class="token keyword">ASC</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">,</span>列名。。。<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">-- CLUSTER 聚簇索引：索引项的排序顺序与基本表的物理顺序一致</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>删除索引：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> IX_xxx <span class="token comment" spellcheck="true">-- 增删改频繁的，系统会花费大量时间维护索引，查询效率变低，因此需要删除这些不必要的索引</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3><span id="12-shi-tu-de-chuang-jian-yu-shan-chu">12.视图的创建与删除</span><a href="#12-shi-tu-de-chuang-jian-yu-shan-chu" class="header-anchor">.</a></h3><blockquote>
<p>视图是从一个表或几个基本表(或视图)中选定某些记录或列而导出的特殊类型的<strong>表</strong>。</p>
<p>视图本身并不存储数据，数据仍存储在原来的基本表上，试图数据是虚拟的，视图只是提供了一种访问基本表中数据的方法。</p>
<p>视图是一个虚表，数据库只存放视图的定义，但是视图视图创建后，用户可以像基本表一样对视图进行查询，在特殊情况下甚至可以增删改</p>
</blockquote>
<p><strong>优点：</strong></p>
<ul>
<li>增加数据安全性<ul>
<li>可以限制用户直接存取基本表的某些列或记录</li>
</ul>
</li>
<li>屏蔽数据的复杂性<ul>
<li>通过视图可得到多个基本表经过计算后的数据</li>
</ul>
</li>
</ul>
<p><strong>视图创建：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> 视图名 <span class="token punctuation">[</span><span class="token punctuation">(</span>列名<span class="token punctuation">[</span><span class="token punctuation">,</span>列名<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">-- 指定列</span>
<span class="token keyword">AS</span> SQL子查询语句
<span class="token punctuation">[</span><span class="token keyword">WITH</span> <span class="token keyword">CHECK</span> <span class="token keyword">OPTION</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">-- 这一行表示 对视图进行增删改操作是要保证，操作的行，要满足子查询语句的条件表达式中的条件，即会自定添加 子查询的条件，如下</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">view</span> view_1 
<span class="token keyword">as</span> 
    <span class="token keyword">select</span> sno<span class="token punctuation">,</span>sname
    <span class="token keyword">from</span> student
    <span class="token keyword">where</span> sno <span class="token operator">></span> <span class="token number">20</span>
    <span class="token keyword">with</span> <span class="token keyword">check</span> <span class="token keyword">option</span>

<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">></span> 对视图进行增删改操作时，需要满足 sno <span class="token operator">></span> <span class="token number">20</span> 的条件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>删除视图：</strong></p>
<pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> 视图名 <span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">-- 级联：删除本视图和导出引用的所有视图</span>
<span class="token comment" spellcheck="true">-- 删除视图，只是删除视图的定义，数据还在(只有数据库管理员才能删除)</span>
<span class="token comment" spellcheck="true">-- 视图对对应的 基本表删除后，视图将无意义，因此我们也需要删除视图</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h4><span id="shi-tu-de-cha-xun-yu-geng-xin">视图的查询与更新</span><a href="#shi-tu-de-cha-xun-yu-geng-xin" class="header-anchor">.</a></h4><p><strong>试图查询：</strong></p>
<blockquote>
<p>使用与基本表一致</p>
</blockquote>
<p><strong>视图更新：</strong></p>
<blockquote>
<p>实际上是 基本表的更新; <strong>但是</strong><code>只能在一个基本表上进行增删改的操作</code>，增删改时为了避免对不属于视图的部分进行操作，定义视图都需要加上 <code>with check option</code></p>
</blockquote>
<blockquote>
<p>使用与基本表一致</p>
</blockquote>
<p><strong>其他注意点：</strong></p>
<ul>
<li><p>如果视图定义中 <code>SELECT</code>语句中含有 <code>GROUP BY</code>、<code>DISTINCT</code> 或 <strong>聚集函数</strong> 等，可进行删除操作，不能进行插入、修改操作</p>
</li>
<li><p>如果视图中包含由表达式计算的列，那么也不允许进行 修改操作</p>
</li>
<li><p><strong>如果视图中没有包含基本表的所有非空列，则不能 进行插入操作</strong></p>
</li>
<li><p>如果视图定义中含有嵌套语句，且内层查询的from子句中涉及的表也是导出的视图的基本表，则不允许更新</p>
</li>
</ul>
<blockquote>
<p> 总之，使用视图，就别想着增删改</p>
</blockquote>
<h3><span id="13-fang-fa">13.方法</span><a href="#13-fang-fa" class="header-anchor">.</a></h3><p><code>DATEPART</code> : <code>SQLServer</code>中 获取日期部分</p>
<pre class="line-numbers language-sql"><code class="language-sql">DATAPART<span class="token punctuation">(</span>year<span class="token punctuation">,</span>getdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><code>getdate</code>：获取当前时间</p>
<p><code>LOWER</code>：字符串小写</p>
<h3><span id="14-xiao-ti-shi">14. 小提示</span><a href="#14-xiao-ti-shi" class="header-anchor">.</a></h3><ul>
<li><code>WHERE</code> 和 <code>GROUP</code> 子句中都不能出现 <strong>聚集函数</strong>，其他的可以</li>
<li>如果要实现<strong>分组结果</strong>的排序，ORDER BY 子句中必须使用 聚集函数或GROUP BY 子句的分组列 </li>
</ul>
<h3><span id="15-san-fan-shi">15. 三范式</span><a href="#15-san-fan-shi" class="header-anchor">.</a></h3><p><strong>第一范式 1NF</strong></p>
<p><code>为了解决高层项导致的更新困难，如 经理 分为 正副 ==&gt; 直接 正经理和副经理</code></p>
<blockquote>
<p>属性是不可再分的原子值</p>
</blockquote>
<p><strong>第二范式 2NF</strong></p>
<p><code>为了解决存在的大量冗余数据和操作异常问题</code></p>
<blockquote>
<p>非主键完全依赖于主键，主键值可以确定唯一非主键值，一个主键确定唯一一行</p>
</blockquote>
<p><strong>第三范式 3NF</strong></p>
<blockquote>
<p>所有字段只能依赖于主属性，不能依赖其他字段。消除依赖传递</p>
</blockquote>
<h3><span id="16-bing-fa-cao-zuo-wen-ti">16.并发操作问题</span><a href="#16-bing-fa-cao-zuo-wen-ti" class="header-anchor">.</a></h3><blockquote>
<p>影响数据一致性</p>
</blockquote>
<ol>
<li><p>丢失修改</p>
<p>两个事务T1和T2读入同一个数据并修改<strong>，事务T2提交的修改结果覆盖了事务T1提交的修改结果</strong>，导致提交的修改结果，导致事务T1的修改结果丢失。</p>
</li>
<li><p>脏读</p>
<p>事务T1更改某一数据，并写入数据库，事务T2读取同一数据，但事<strong>务T1由于某种原因被撤销</strong>，此时事务T1更改过的数据恢复到原来的值，使事务T2读取到的值与数据库中的值不同，只是操作过程中的一个过渡性的、不需要的、脏的数据。</p>
</li>
<li><p>不可重复读</p>
<p><strong>事务T1读取数据后，事务T2执行更改操作，使事务T1无法在现前一次读取的结果</strong></p>
<ul>
<li>事务T1读取某一数据之后，事务T2对其修改，T1再次读取时，结果与上次不一致</li>
<li>事务T1按一定条件读取某些数据记录以后，事务T2删除了其中的部分记录，使事务T1按相同条件再次读取记录时，发现某些记录不存在了。（幻读的一种格式）</li>
<li>事务T1按一定条件读取某些数据记录以后，事务T2插入了一些记录，使事务T1按相同的条件再次读取记录时，发现增加了记录。（幻读的一种格式，普遍）</li>
</ul>
</li>
<li><p>幻读</p>
<p>事务T1插入数据提交前，事务T2获取数据；T1事务提交后，T2获取数据（结果多了新纪录）– repeatable read隔离之前</p>
<p>使用 repeatable read隔离之后：</p>
<p>​    T2获取的数据，是不会有任何变化的，但是当我们更新数据后，在查询，就会发现原本没有的记录，就有了记录（细节看之前的事务）</p>
</li>
</ol>
<h3><span id="17-suo">17.锁</span><a href="#17-suo" class="header-anchor">.</a></h3><ol>
<li><p>排他锁（行级）</p>
<blockquote>
<p>写锁，X锁</p>
</blockquote>
<ul>
<li>如果事务T对数据库对象加X锁，只允许事务T读取和更改操作，其他事务无法加锁 —— 保证数据不被同时读写</li>
</ul>
</li>
<li><p>共享锁（表级）</p>
<blockquote>
<p>读锁，S锁</p>
</blockquote>
<ul>
<li><p>如果事务T对数据库对象加S锁，只允许事务T读取，其他事务可以加S锁，但不能加X锁 ——</p>
<p>保证数据不被同时写，可以读</p>
</li>
</ul>
</li>
</ol>
<p><strong>锁定机制：</strong></p>
<ol>
<li><p>一级锁定协议：</p>
<ol>
<li><p>事务T在修改数据对象之前，必须先对其加X锁，并直到事务结束时才释放X锁；<strong>如果事务T只是读取，就不加锁</strong>； —— 只能防止丢失修改，但不能防止脏读、不可重复读。</p>
<blockquote>
<p>事务T 在修改数据之前 加了X锁，直到修改完毕T事务提交，此时数据已经修改完毕，不会被其他事务覆盖 —— 无丢失修改</p>
</blockquote>
<blockquote>
<p>事务T 在查数据，由于没有加锁，事务T之前其他事务更新数据，事务T查到数据，接着其他事务回滚，事务T在查，发现该结果，与数据库中不一致 —— 存在脏读</p>
</blockquote>
</li>
</ol>
</li>
<li><p>二级锁定协议：</p>
<ol>
<li><p>在一级的基础上，加上事务T在读取之前必须加S锁，读完后立刻释放S锁 —— 进一步防止脏读，但是不防不可重复读</p>
<blockquote>
<p>事务T 在查数据之前加S锁，在事务T读的过程中，其他事务只能读，不能写（不可能存在回滚），所以事务T读完后，读取的数据是一直在数据库中存在的 —— 没有脏读</p>
</blockquote>
<blockquote>
<p>事务T 在读取数据加S锁，但是这个S锁，在读后就释放了，因此在事务T释放S锁后，进行更新操作，事务T再次读取数加S锁，此时读到的数据和之前的数据不一致 —— 不可重复读</p>
</blockquote>
</li>
</ol>
</li>
<li><p>三级锁定协：</p>
<ol>
<li><p>在一级的基础上，加上事务T在读取之前必须加S锁，直到事务T结束后才释放S锁 </p>
<blockquote>
<p>查询等到事务T结束，才会释放S锁，即在整个事务T中间，其他的事务只能读，不能写，因此读取的数据始终是相同的 —— 没有不可重复读</p>
</blockquote>
</li>
</ol>
</li>
</ol>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://www.liuminkai.top" rel="external nofollow noreferrer">liuminkai</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://www.liuminkai.top/2020/07/23/63394.html">http://www.liuminkai.top/2020/07/23/63394.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="http://www.liuminkai.top" target="_blank">liuminkai</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">
                                    <span class="chip bg-color">数据库</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/gitalk/gitalk.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '4e04421bf007cd448eb3',
        clientSecret: '98d0aaec7d39c4c8ba7ef6118575f68eafc77951',
        repo: 'blogtalk',
        owner: 'liuminkai-blog',
        admin: ["liuminkai-blog"],
        id: '2020-07-23T17-44-01',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/07/24/39821.html">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//medias/featureimages/6.jpg" class="responsive-img" alt="MyBatis学习笔记-05-配置解析">
                        
                        <span class="card-title">MyBatis学习笔记-05-配置解析</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            配置解析.1、核心配置文件.
mybatis-config.xml（文件名：可以更改，官方推荐这个）

配置文档的顶层结构如下：

configuration（配置）          
properties（属性）
settings（设置
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-07-24
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            liuminkai
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">
                        <span class="chip bg-color">学习笔记</span>
                    </a>
                    
                    <a href="/tags/mybatis/">
                        <span class="chip bg-color">mybatis</span>
                    </a>
                    
                    <a href="/tags/ssm/">
                        <span class="chip bg-color">ssm</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/07/23/31899.html">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//medias/featureimages/3.jpg" class="responsive-img" alt="sql注入">
                        
                        <span class="card-title">sql注入</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Sql注入.1、SQL注入原理.
攻击者在页面提交恶意代码
服务器未对提交参数进行过滤或过滤不足
攻击者利用拼接sql语句方式获取数据库敏感信息

2、简单sql注入演示.服务器 执行的SQL语句 ： select * from user 
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-07-23
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            liuminkai
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/web%E5%AE%89%E5%85%A8/">
                        <span class="chip bg-color">web安全</span>
                    </a>
                    
                    <a href="/tags/SQL%E6%B3%A8%E5%85%A5/">
                        <span class="chip bg-color">SQL注入</span>
                    </a>
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8/">
                        <span class="chip bg-color">数据库安全</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->


<script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="http://www.liuminkai.top" target="_blank">liuminkai</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">164.2k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/kaiminliu" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:liuyou2021@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>




    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1423928650" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1423928650" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//js/matery.js"></script>

    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/others/busuanzi.pure.mini.js"></script>
    

    

	
    

    

    

    

    
    <script src="https://cdn.jsdelivr.net/gh/liuminkai-blog/liuminkai-blog.github.io//libs/instantpage/instantpage.js" type="module"></script>
    
	
	
	<!-- 一言API -->
	<!-- 现代写法，推荐 -->
	<!-- 兼容低版本浏览器 (包括 IE)，可移除 -->
	<script src="https://cdn.jsdelivr.net/npm/bluebird@3/js/browser/bluebird.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@2.0.3/fetch.min.js"></script>
	<!--End-->
	<script>
	  fetch('https://v1.hitokoto.cn')
		.then(function (res){
		  return res.json();
		})
		.then(function (data) {
		  var hitokoto = document.getElementById('hitokoto');
		  hitokoto.innerText = data.hitokoto + '——【' + data.from + '】';
		})
		.catch(function (err) {
		  console.error(err);
		})
	</script>
</body>

</html>
